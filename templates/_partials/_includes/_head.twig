{# templates/_partials/_includes/_head.twig #}

{% set seo = craft.entries.section('seoData').one() %}

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>
  {{ seo.seoTitle 
    ?? entry.seoTitle 
    ?? entry.title 
    ?? 'Suat ∆ès…ôdov ‚Äî IT Specialist' }}
</title>

{# Dinamik SEO meta-lar (Seo data ‚Üí Entry ‚Üí Default fallback) #}
<meta name="description" content="{{ seo.seoDescription 
  ?? entry.seoDescription 
  ?? 'Windows Server, ≈û…ôb…ôk…ô, Virtualizasiya v…ô T…ôhl√ºk…ôsizlik √ºzr…ô IT m√ºt…ôx…ôssisi.' }}">

<meta name="keywords" content="{{ seo.seoKeyword
  ?? entry.seoKeywords 
  ?? 'Windows Server, Network, VMware, Hyper-V, Active Directory, IT Support' }}">

{# ‚úÖ Robots meta (index/follow sah…ôl…ôrin…ô …ôsas…ôn) #}
{% set isIndexed = false %}
{% set isFollowed = false %}

{# SeoData yoxlanƒ±≈üƒ± #}
{% if seo is defined %}
  {% if seo.indexed == true %}
    {% set isIndexed = true %}
  {% endif %}
  {% if seo.followed == true %}
    {% set isFollowed = true %}
  {% endif %}
{% endif %}

{# ∆èg…ôr Entry s…ôviyy…ôsind…ô d…ô varsa, √ºst√ºnl√ºk ver #}
{% if entry is defined %}
  {% if entry.indexed == true %}
    {% set isIndexed = true %}
  {% elseif entry.indexed == false %}
    {% set isIndexed = false %}
  {% endif %}

  {% if entry.followed == true %}
    {% set isFollowed = true %}
  {% elseif entry.followed == false %}
    {% set isFollowed = false %}
  {% endif %}
{% endif %}

{% set robotsContent = (isIndexed ? 'index' : 'noindex') ~ ', ' ~ (isFollowed ? 'follow' : 'nofollow') %}
<meta name="robots" content="{{ robotsContent }}">

{# ‚úÖ DEV MODE √º√ß√ºn SEO Debug √ßƒ±xƒ±≈üƒ± #}
{% if craft.app.config.general.devMode %}
  <div style="background:#111;color:#0f0;padding:10px;margin:10px;font-family:monospace;">
    <strong>üîç SEO Debug:</strong><br>
    seo.indexed = {{ seo.indexed ?? 'undefined' }}<br>
    seo.followed = {{ seo.followed ?? 'undefined' }}<br>
    entry.indexed = {{ entry.indexed ?? 'undefined' }}<br>
    entry.followed = {{ entry.followed ?? 'undefined' }}<br>
    Result meta = {{ robotsContent }}
  </div>

  <script>
    console.log("üîç SEO Debug ‚Üì");
    console.log("seo.indexed =", "{{ seo.indexed ?? 'undefined' }}");
    console.log("seo.followed =", "{{ seo.followed ?? 'undefined' }}");
    console.log("entry.indexed =", "{{ entry.indexed ?? 'undefined' }}");
    console.log("entry.followed =", "{{ entry.followed ?? 'undefined' }}");
    console.log("robots result =", "{{ robotsContent }}");
  </script>
{% endif %}

{# Tailwind v…ô Lucide ikonlarƒ± #}
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.tailwindcss.com"></script>

{# Google fontlar #}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

{# Lokal CSS v…ô JS (web/css v…ô web/js qovluqlarƒ± √º√ß√ºn) #}
<link rel="stylesheet" href="{{ siteUrl('css/style.css') }}">
<script src="{{ siteUrl('js/main.js') }}" defer></script>

{# B…ôzi qlobal still…ôr (s√ºr√º≈üm…ô v…ô ≈ü√º≈ü…ô effektl…ôri) #}
<style>
  html { scroll-behavior: smooth; }
  .glass {
    backdrop-filter: saturate(180%) blur(10px);
    background: rgba(255, 255, 255, .6);
  }
</style>

{# Open Graph meta-lar (Facebook, LinkedIn √º√ß√ºn) #}
<meta property="og:title" content="{{ seo.seoTitle 
  ?? entry.seoTitle 
  ?? 'Suat ∆ès…ôdov ‚Äî IT Specialist' }}" />

<meta property="og:description" content="{{ seo.seoDescription 
  ?? entry.seoDescription 
  ?? 'Windows Server, ≈û…ôb…ôk…ô, Virtualizasiya v…ô T…ôhl√ºk…ôsizlik √ºzr…ô IT m√ºt…ôx…ôssisi.' }}" />

<meta property="og:type" content="website" />
<meta property="og:image" content="{{ entry.heroImage.one().url 
  ?? siteUrl('assets/images/default-og.jpg') }}" />
<meta property="og:url" content="{{ craft.app.request.absoluteUrl }}" />
<meta name="theme-color" content="#0f172a" />

{# Twitter meta-lar #}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ seo.seoTitle 
  ?? entry.seoTitle 
  ?? 'Suat ∆ès…ôdov ‚Äî IT Specialist' }}">
<meta name="twitter:description" content="{{ seo.seoDescription 
  ?? entry.seoDescription 
  ?? 'Windows Server, ≈û…ôb…ôk…ô, Virtualizasiya v…ô T…ôhl√ºk…ôsizlik √ºzr…ô IT m√ºt…ôx…ôssisi.' }}">
<meta name="twitter:image" content="{{ entry.heroImage.one().url 
  ?? siteUrl('assets/images/default-og.jpg') }}">

{# JSON-LD: Person Schema (SEO √º√ß√ºn strukturla≈üdƒ±rƒ±lmƒ±≈ü data) #}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Suat ∆ès…ôdov",
  "jobTitle": "IT Specialist",
  "email": "mailto:suatasadov74@gmail.com",
  "telephone": "+994557639785",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "20 Yanvar k√º√ß., Mehdiabad q…ôs.",
    "addressLocality": "Ab≈üeron",
    "addressCountry": "AZ"
  },
  "knowsAbout": [
    "Windows Server", "Active Directory", "DNS", "DHCP", "Group Policy",
    "TCP/IP", "VLAN", "VPN", "Routing & Switching",
    "VMware ESXi", "Hyper-V", "SSL/TLS", "SSH", "Backup"
  ]
}
</script>
